---
layout: post
title: Multi-platform Bluetooth with .Net
date: '2018-01-01T12:22:00.001+09:00'
author: 'Contact:'
tags:
- bluetooth
- ble
- c#
- xamarin
- xamarin.forms
modified_time: '2018-01-01T12:22:30.862+09:00'
blogger_id: tag:blogger.com,1999:blog-5371326417913853395.post-758616112482165922
blogger_orig_url: https://www.blogger.com/comment.g?blogID=5371326417913853395&postID=758616112482165922
---

Xamarin provides the following libraries:<br /><ul><li>Android: <a href="https://developer.xamarin.com/api/namespace/Android.Bluetooth/">https://developer.xamarin.com/api/namespace/Android.Bluetooth/</a></li><li>iOS: <a href="https://developer.xamarin.com/api/namespace/CoreBluetooth/">https://developer.xamarin.com/api/namespace/CoreBluetooth/</a></li><li>Mac OSX:&nbsp;<a href="https://developer.xamarin.com/api/namespace/MonoMac.CoreBluetooth/">https://developer.xamarin.com/api/namespace/MonoMac.CoreBluetooth/</a></li></ul>I'm unclear whether that last library is actually distinct or the same CoreBluetooth library works on both iOS and OSX.&nbsp; But, <a href="https://github.com/xamarin/mac-samples/tree/master/HeartRateMonitor">this sample</a> seems like everything will work.<br /><br /><a href="https://www.nuget.org/packages/Plugin.BLE/">Plugin.BLE</a> is the most used package on nuget (<a href="https://github.com/xabre/xamarin-bluetooth-le">github</a>).  But trying to use it either in the Mac Cocoa app or the shared library resulted in a System.NotImplementedException:<br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;">1:  Plugin.BLE.CrossBluetoothLE.get_Current() in   <br />2:  mobile_app.App..ctor() in /Users/jake/jade/jade/mobile_app/mobile_app/mobile_app/App.xaml.cs:28  <br />3:  mobile_app.OSX.AppDelegate.DidFinishLaunching(Foundation.NSNotification notification) in /Users/jake/jade/jade/mobile_app/mobile_app.OSX/AppDelegate.cs:33  <br />4:  AppKit.NSApplication.NSApplicationMain() in   <br />5:  AppKit.NSApplication.Main(string[] args) in /Users/builder/data/lanes/5489/c4240f3f/source/xamarin-macios/src/AppKit/NSApplication.cs:100  <br />6:  mobile_app.OSX.MainClass.Main(string[] args) in /Users/jake/jade/jade/mobile_app/mobile_app.OSX/Main.cs:12  <br /></code></pre><br /><a href="https://www.nuget.org/packages/Plugin.BluetoothLE/">Plugin.BluetoothLE</a>&nbsp;is the second most used package on nuget (<a href="https://github.com/aritchie/bluetoothle">github</a>).&nbsp; Besides being actively maintained (commits in the last 6 months), it supports more platforms (in particular .NetStandard 2.0 and macOS are explicitly mentioned).<br /><br />It's designed around use with Reactive Extensions (<a href="https://msdn.microsoft.com/library/hh242985.aspx">Rx</a>), something that's been on my radar for a while but I never really looked into very seriously.<br /><br /><a href="https://weblogs.asp.net/dixin/understanding-c-sharp-async-await-2-awaitable-awaiter-pattern">https://weblogs.asp.net/dixin/understanding-c-sharp-async-await-2-awaitable-awaiter-pattern</a><br />needed for GetAwaiter() extension methods:<br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> using System.Reactive.Linq;  <br /></code></pre><br />