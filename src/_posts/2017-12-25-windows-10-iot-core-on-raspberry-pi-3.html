---
layout: post
title: Windows 10 IoT Core on Raspberry Pi 3
date: '2017-12-25T05:34:00.001+09:00'
author: 'Contact:'
tags:
- iot
- raspi
- iotcore
- win10
modified_time: '2017-12-25T05:34:55.851+09:00'
thumbnail: https://4.bp.blogspot.com/-Z5YabqARYIU/WkACj5I_WfI/AAAAAAAACyU/PnCl3lGOwvUpJUSc5ZjWhVJ2ON8m5_r-gCLcBGAs/s72-c/Screen%2BShot%2B2017-12-24%2Bat%2B12.34.50.png
blogger_id: tag:blogger.com,1999:blog-5371326417913853395.post-5062559291293129092
blogger_orig_url: http://rendered-obsolete.blogspot.com/2017/12/windows-10-iot-core-on-raspberry-pi-3.html
---

Following up on&nbsp;<a href="http://rendered-obsolete.blogspot.com/2017/11/win10-iot-core-redux.html">my last post</a>, finally got around to trying to install IoT Core on my actual Raspberry Pi device:<br /><ul><li><a href="https://www.raspberrypi.org/products/raspberry-pi-3-model-b/">Raspberry Pi 3 model B</a></li><li><a href="https://www.raspberrypi.org/products/raspberry-pi-touch-display/">7" Touchscreen</a></li></ul><br />My development machine is a <a href="https://support.apple.com/kb/SP756?locale=en_US">15" Macbook Pro</a> running&nbsp;<span style="font-family: &quot;calibri&quot;; font-size: 11pt;">OSX High Sierra (10.3.2).&nbsp; Wasn't able to get a Windows 10 VM in VirtualBox to recognize the SD card slot in my adapter (the otherwise fantastic <a href="https://satechi.net/collections/usb-type-c/products/satechi-aluminum-multi-port-adapter-4k">Satechi type-C multi-port adapater</a>), so started looking for how to flash the image without using <a href="https://developer.microsoft.com/en-us/windows/iot/Downloads">IoT Core Dashboard</a>.</span><br /><br /><h3>Image Preparation</h3>Microsoft has some docs about using <a href="https://docs.microsoft.com/en-us/windows/iot-core/connect-your-device/dism">dism</a>&nbsp;instead of Dashboard.&nbsp; From the&nbsp;<a href="https://developer.microsoft.com/en-us/windows/iot/Downloads">IoT Core download page</a>&nbsp;you can obtain an iso file containing an msi that by default installs the image to: <br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> C:\Program Files (x86)\Microsoft IoT\FFU\RaspberryPi2\flash.ffu  <br /></code></pre><br />ffu2img (<a href="https://github.com/t0x0/random/wiki/ffu2img" style="font-size: 11pt;">https://github.com/t0x0/random/wiki/ffu2img</a>) can be used to convert the <a href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/deploy-windows-using-full-flash-update--ffu">ffu</a>&nbsp;to an img file usable with <a href="https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/dd.1.html">dd</a> found on OSX (and Linux, etc.).<br /><br />Ensure you're using <a href="https://www.python.org/download/releases/2.7/">Python 2.7</a>&nbsp;and convert the image:<br /><pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> python ffu2img.py PATH<path>/flash.ffu<br /></path></code></pre>Resulting in a <b><i>flash.img</i></b> file in the same location as the ffu.<br /><br /><h3>Writing Image to SD Card</h3>To write the image to an SD card I consulted the documentation at <a href="https://www.raspberrypi.org/documentation/installation/installing-images/mac.md">raspberrypi.org</a>.<br /><br />I had trouble getting those instructions to work with my card/reader.&nbsp; No matter what, dd failed with "Operation not permitted".&nbsp; In the end I had to:<br /><ol><li>Insert card into reader and connect reader to laptop</li><li>Without unmounting the SD card, run:<pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> sudo diskutil partitionDisk /dev/disk2 1 MBR "Free Space" "%noformat%" 100%  <br /></code></pre></li><li>Disconnect then reconnect the reader (above command seemed to eject the SD card)</li><li>Write the image:<pre style="background: #f0f0f0; border: 1px dashed #cccccc; color: black; font-family: &quot;arial&quot;; font-size: 12px; height: auto; line-height: 20px; overflow: auto; padding: 0px; text-align: left; width: 99%;"><code style="color: black; word-wrap: normal;"> sudo dd bs=1m if=PATH/flash.img of=/dev/rdisk2 conv=sync</code></pre></li></ol><div>In my case, the SD card is&nbsp;<b><i>/dev/disk2</i></b>.&nbsp; /dev/disk2 and /dev/rdisk2 in the above commands should be adjusted appropriately for other cases.</div><div><br /></div>Using df can see several partitions were created (/dev/disk2s1, disk2s2, disk2s3, and disk2s6) on the SD card.&nbsp; Once inserted in the Raspberry Pi device and powered on, IoT Core should boot.<br /><div style="font-family: Calibri; font-size: 11.0pt; margin: 0in;"><br /><h3>IoT Core Setup</h3></div><div style="font-family: Calibri; font-size: 11.0pt; margin: 0in;">As it happens, I didn't have a USB keyboard on hand to get the device on the wifi.<br /><br />Using an ethernet cable to connect the device directly to my laptop, I obtained the device's link-local address from the bottom-left of the touch screen.&nbsp; The device's admin portal is now accessible by pointing my laptop browser at http://169.254.236.118:8080 (default username/password is Administrator/p@ssw0rd).<br /><br />In the left panel, selecting Connectivity, then Network, you can configure the wifi AP:<br /><div class="separator" style="clear: both; text-align: center;"><a href="https://4.bp.blogspot.com/-Z5YabqARYIU/WkACj5I_WfI/AAAAAAAACyU/PnCl3lGOwvUpJUSc5ZjWhVJ2ON8m5_r-gCLcBGAs/s1600/Screen%2BShot%2B2017-12-24%2Bat%2B12.34.50.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="1046" data-original-width="1600" height="209" src="https://4.bp.blogspot.com/-Z5YabqARYIU/WkACj5I_WfI/AAAAAAAACyU/PnCl3lGOwvUpJUSc5ZjWhVJ2ON8m5_r-gCLcBGAs/s320/Screen%2BShot%2B2017-12-24%2Bat%2B12.34.50.png" width="320" /></a></div><br />Initially the display was upside-down (assuming the HDMI port is "up" as when using <a href="https://www.amazon.com/Raspberry-Pi-7-Inch-Touch-Screen/dp/B01GQFUWIC">this touchscreen case</a>).&nbsp; To fix this, in the left panel pick&nbsp;<span style="font-size: 14.6667px;">Device Settings and towards the bottom in Display Orientation select "Landscape (Flipped)":</span><br /><div class="separator" style="clear: both; text-align: center;"><a href="https://3.bp.blogspot.com/-VqYoHAA5PeQ/WkACj9OvC8I/AAAAAAAACyY/-EVWnDAgqWYuJnjh05paGGcqVtRItHcsACEwYBhgL/s1600/Screen%2BShot%2B2017-12-24%2Bat%2B12.35.44.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" data-original-height="1160" data-original-width="1600" height="231" src="https://3.bp.blogspot.com/-VqYoHAA5PeQ/WkACj9OvC8I/AAAAAAAACyY/-EVWnDAgqWYuJnjh05paGGcqVtRItHcsACEwYBhgL/s320/Screen%2BShot%2B2017-12-24%2Bat%2B12.35.44.png" width="320" /></a></div><span style="font-size: 14.6667px;"><br /></span></div>